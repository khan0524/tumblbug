<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>텀블벅 성공적인 펀딩을 위한 A-Z 가이드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FAF7F5;
            color: #4A4A4A;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .llm-input-area {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
        }
        .llm-input-area textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ccc;
            border-radius: 0.375rem;
            margin-bottom: 0.75rem;
            font-size: 1rem;
        }
        .llm-output-area {
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 0.375rem;
            padding: 1rem;
            margin-top: 1rem;
            min-height: 50px;
            white-space: pre-wrap; /* Preserve whitespace and line breaks */
            word-wrap: break-word; /* Break long words */
        }
        .cta-button {
            background-color: #E58C5D; /* Accent color */
            color: #FFFFFF;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            font-weight: 600;
            text-align: center;
            display: inline-block;
            transition: background-color 0.2s ease-in-out;
            cursor: pointer;
        }
        .cta-button:hover {
            background-color: #D47A4C; /* Darker Accent */
        }
        .loading-indicator {
            display: none;
            text-align: center;
            margin-top: 1rem;
            color: #5D737E;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>텀블벅 성공적인 펀딩을 위한 A-Z 가이드</h1>

        <section id="storytelling" class="content-card">
            <h2>✍️ 스토리텔링의 힘</h2>
            <p>후원자의 마음을 움직이는 것은 진정성 있는 이야기입니다. 여러분의 프로젝트 스토리를 매력적으로 전달하는 방법을 배워보세요.</p>
            <div class="llm-input-area">
                <h3>✨ 스토리텔링 피드백</h3>
                <p>작성하신 프로젝트 소개글 초안을 입력하시면, Gemini가 피드백과 개선 방안을 제안해 드립니다.</p>
                <textarea id="storytellingInput" rows="8" placeholder="프로젝트 소개글을 여기에 입력해주세요."></textarea>
                <button id="getFeedbackButton" class="cta-button">✨ 피드백 받기</button>
                <div id="storytellingLoadingIndicator" class="loading-indicator">피드백을 생성 중입니다...</div>
                <div id="storytellingOutput" class="llm-output-area"></div>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const storytellingInput = document.getElementById('storytellingInput');
            const getFeedbackButton = document.getElementById('getFeedbackButton');
            const storytellingOutput = document.getElementById('storytellingOutput');
            const storytellingLoadingIndicator = document.getElementById('storytellingLoadingIndicator');

            async function callGeminiAPI(prompt, outputElement, loadingElement) {
                loadingElement.style.display = 'block';
                outputElement.textContent = ''; // Clear previous output
                try {
                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    // 여기에 Gemini API 키를 넣었습니다.
                    const apiKey = "AIzaSyBQs0B9L8ZC-_ONZONge_M68mDT18a6-9I";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        outputElement.textContent = result.candidates[0].content.parts[0].text;
                    } else {
                        outputElement.textContent = '피드백을 생성하는 데 실패했습니다. 다시 시도해주세요.';
                    }
                } catch (error) {
                    console.error('Error calling Gemini API:', error);
                    outputElement.textContent = 'API 호출 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.';
                } finally {
                    loadingElement.style.display = 'none';
                }
            }

            getFeedbackButton.addEventListener('click', function() {
                const storytellingDraft = storytellingInput.value.trim();
                if (storytellingDraft) {
                    const prompt = `다음 텀블벅 프로젝트 소개글에 대한 피드백을 제공하고 개선 방안을 제안해줘. 특히 후원자의 공감을 얻고 펀딩을 유도하는 측면에 중점을 둬. 소개글: "${storytellingDraft}"`;
                    callGeminiAPI(prompt, storytellingOutput, storytellingLoadingIndicator);
                } else {
                    storytellingOutput.textContent = '프로젝트 소개글을 입력해주세요.';
                }
            });
        });
    </script>
</body>
</html>